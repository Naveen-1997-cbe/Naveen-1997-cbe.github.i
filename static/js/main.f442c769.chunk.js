(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{108:function(e,t){},110:function(e,t){},133:function(e,t,c){},140:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),s=c(19),i=c.n(s),r=(c(87),c(88),c(144)),o=c(80),l=c(8),j=c(30),m=c.n(j),d=c(46),b=c(34),u=c(47),h=c(31),O=c(7),f=c(75),g=c(37),x=c.n(g),v=c(76),p=c.n(v),N=(c(133),c(145)),k=c(142),y=c(143),C=c.p+"static/media/chat-btn.37f4cac4.svg",S=c.p+"static/media/camera-on.b09158eb.svg",w=c.p+"static/media/camera-off.4bc3f4c6.svg",z=c.p+"static/media/mic-on.fa80c6cb.svg",T=c.p+"static/media/mic-off.dcc8afac.svg",E=c.p+"static/media/call.6a0fa408.svg",D=c.p+"static/media/record.552c8b0f.svg",R=c.p+"static/media/screen-share.e1c5e241.svg",P=(c.p,c.p+"static/media/attach.b6a98fd7.svg"),I=c.p+"static/media/send.1a5fe5d4.svg",M=c.p+"static/media/volume.549b853d.svg",U=(c(77),c(1)),F=p.a.connect("http://localhost:5000"),J=function(e){var t=Object(a.useState)(""),c=Object(O.a)(t,2),n=c[0],s=c[1],i=Object(a.useState)(),r=Object(O.a)(i,2),o=r[0],j=r[1],g=Object(a.useState)(),v=Object(O.a)(g,2),p=v[0],J=v[1],B=Object(a.useState)(!1),V=Object(O.a)(B,2),A=V[0],H=V[1],L=Object(a.useState)(""),_=Object(O.a)(L,2),K=_[0],W=_[1],Y=Object(a.useState)(""),q=Object(O.a)(Y,2),G=q[0],Q=q[1],X=Object(a.useState)(),Z=Object(O.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(!1),ce=Object(O.a)(te,2),ae=ce[0],ne=ce[1],se=Object(a.useState)(""),ie=Object(O.a)(se,2),re=ie[0],oe=ie[1],le=Object(a.useState)(""),je=Object(O.a)(le,2),me=je[0],de=je[1],be=Object(a.useState)(!1),ue=Object(O.a)(be,2),he=ue[0],Oe=ue[1],fe=Object(a.useState)(""),ge=Object(O.a)(fe,2),xe=(ge[0],ge[1]),ve=Object(a.useState)(!1),pe=Object(O.a)(ve,2),Ne=pe[0],ke=pe[1],ye=Object(a.useState)(!1),Ce=Object(O.a)(ye,2),Se=(Ce[0],Ce[1]),we=Object(a.useState)([]),ze=Object(O.a)(we,2),Te=(ze[0],ze[1]),Ee=Object(a.useState)(""),De=Object(O.a)(Ee,2),Re=De[0],Pe=(De[1],Object(a.useState)([])),Ie=Object(O.a)(Pe,2),Me=Ie[0],Ue=Ie[1],Fe=Object(a.useState)(!1),Je=Object(O.a)(Fe,2),Be=(Je[0],Je[1]),Ve=Object(a.useState)({message:"",name:""}),Ae=Object(O.a)(Ve,2),He=Ae[0],Le=Ae[1],_e=Object(a.useState)(!1),Ke=Object(O.a)(_e,2),We=Ke[0],Ye=Ke[1],qe=Object(a.useState)(!1),Ge=Object(O.a)(qe,2),Qe=Ge[0],Xe=Ge[1],Ze=Object(a.useState)(),$e=Object(O.a)(Ze,2),et=$e[0],tt=($e[1],Object(a.useState)()),ct=Object(O.a)(tt,2),at=ct[0],nt=ct[1],st=Object(a.useState)(!1),it=Object(O.a)(st,2),rt=it[0],ot=it[1],lt=function(){return ot(!1)},jt=Object(a.useState)(!0),mt=Object(O.a)(jt,2),dt=(mt[0],mt[1],Object(a.useState)()),bt=Object(O.a)(dt,2),ut=(bt[0],bt[1],Object(a.useState)(!1)),ht=Object(O.a)(ut,2),Ot=(ht[0],ht[1]),ft=Object(a.useState)(""),gt=Object(O.a)(ft,2),xt=gt[0],vt=gt[1],pt=Object(a.useRef)(),Nt=Object(a.useRef)(),kt=Object(a.useRef)(),yt=Object(a.useRef)(),Ct=e.match.params.roomID,St=Object(l.f)();Object(a.useRef)(),Object(a.useRef)("");Object(a.useEffect)((function(){var e=o,t=p;ot(!0),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){j(e),pt.current.srcObject=e})),F.on("me",(function(e){console.log("socketid",e),s(e)})),F.emit("join-room",Ct),F.on("USer Connected",(function(e){console.log("connected ",e)})),F.on("callUser",(function(e){H(!0),W(e.from),Q(e.name),ee(e.signal),yt.current=e.signal})),F.on("mutePerson",(function(e){xe(e.name),ke(e.access),console.log("return for frontend mute useeffect",e)})),F.on("unmutePerson",(function(e){xe(e.name),ke(e.access),console.log("return for frontend umute useeffect",e)})),F.on("take id to call",(function(e){Te((function(t){return[].concat(Object(h.a)(t),[e])})),Se(!0),console.log("returned to front-end",e)})),F.on("screenshare",(function(e){console.log("screenshare",e)})),F.on("message",(function(e){var t=e.name,c=e.message;Ue([].concat(Object(h.a)(Me),[{name:t,message:c}]))})),F.on("endCallRoute",(function(e){console.log("value",e),e&&St.push("/")})),F.on("fileName",(function(e){console.log("fileName",e),vt(e)})),F.on("endCall",(function(c){console.log("endCall",c),console.log("mystream",e),console.log("remoteStream",t),c&&(o.getTracks().forEach((function(e){e.stop()})),p.getTracks().forEach((function(e){e.stop()})),kt.current.destroy(),St.push("/"))}))}),[]),Object(a.useEffect)((function(){F.on("message",(function(e){var t=e.name,c=e.message;Ue([].concat(Object(h.a)(Me),[{name:t,message:c}]))}))}),[Me]);var wt=function(e){Le(Object(u.a)(Object(u.a)({},He),{},Object(b.a)({},e.target.name,e.target.value)))},zt=function(e){var t=He.name,c=He.message;F.emit("message",{name:t,message:c}),Le({message:"",name:t}),F.on("message",(function(e){var t=e.name,c=e.message;Ue([].concat(Object(h.a)(Me),[{name:t,message:c}]))}))},Tt=function(e){var t=new x.a({initiator:!0,trickle:!1,stream:o});t.on("signal",(function(t){F.emit("callUser",{userToCall:e,signalData:t,from:n,name:He.name})})),t.on("stream",(function(e){Nt.current.srcObject=e,J(e)})),F.on("callAccepted",(function(e){ne(!0),t.signal(e.signal),Q(e.from)})),kt.current=t,Ot(!0),nt(kt.current._pc.getSenders()),console.log("Callername",G),F.emit("otherUserName",Re),F.on("otherUserName",(function(e){oe(e)})),ot(!1)};Object(a.useEffect)((function(){console.log("support fileName")}),[xt]);var Et=function(e){pt.current.srcObject=new MediaStream(e)},Dt=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be(!0),Ye(!0),(t=o.getTracks()).forEach((function(e){"audio"===e.kind&&(e.enabled=!1)})),Et(t),new x.a({initiator:!1,trickle:!1,stream:o}),F.emit("mutePerson",He.name),e.prev=7,e.next=10,F.on("mutePerson",(function(e){xe(e.name),ke(e.access),console.log("return for frontend mute useeffect",e)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.emit("unmutePerson",{name:He.name}),e.prev=1,e.next=4,F.on("unmutePerson",(function(e){xe(e.name),ke(e.access),console.log("return for frontend umute useeffect",e)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:Ye(!1),(t=o.getTracks()).forEach((function(e){"audio"===e.kind&&(e.enabled=!0)})),console.log("my unmute is hitted"),Et(t);case 14:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("supprotinmg")}),[et]);var Pt=function(){var e=o.getVideoTracks()[0];at.find((function(t){return t.track.kind==e.kind})).replaceTrack(e)};return Object(U.jsxs)("div",{className:"container-fluid bg-yellow",children:[Object(U.jsxs)("div",{className:"row position-relative",children:[Object(U.jsxs)("div",{className:"col-md-6 col-lg-7 user-video ml-5 mt-4 p-0",children:[ae&&!he?Object(U.jsxs)("div",{children:[G||re?Object(U.jsxs)("p",{className:"userName user2 d-flex",children:[Object(U.jsx)("div",{className:"pink-dot "}),G]}):Object(U.jsx)("p",{className:"userName",children:re}),Object(U.jsx)("video",{playsInline:!0,ref:Nt,autoPlay:!0,style:{width:"100%",objectFit:"cover"}})]}):null,Object(U.jsx)("div",{className:"user-mute",children:Ne?Object(U.jsx)(N.a,{className:"mute mute2",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:T,alt:"chat-btn",width:"15px",height:"15px"})}):Object(U.jsx)(N.a,{className:"mute",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:z,alt:"chat-btn",width:"15px",height:"15px"})})})]}),Object(U.jsxs)("div",{className:"col-md-6 col-lg-4 offset-1 my-video mt-4 ml-4 p-0",children:[Object(U.jsxs)("p",{className:"userName d-flex",children:[" ",Object(U.jsx)("div",{className:"pink-dot "})," ",He.name]}),o&&Object(U.jsx)("video",{playsInline:!0,muted:!0,ref:pt,autoPlay:!0,style:{width:"100%",objectFit:"cover"}})]}),Object(U.jsx)("div",{className:"col-md-6 col-lg-7 ml-5 mt-4 bg-button",children:Object(U.jsxs)("div",{className:"space d-flex",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{className:"bg-btn mr-4",variant:"secondary",size:"md",children:Object(U.jsx)("img",{src:C,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name ml-2",children:"Chatting"})]}),Object(U.jsx)("div",{children:Qe?Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{onClick:function(){Xe(!1);var e=o.getTracks();e.forEach((function(e){"video"===e.kind&&(e.enabled=!0)})),Et(e)},className:"bg-gray active-pink mr-4",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:w,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name",children:"Camera On"})]}):Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{onClick:function(){Xe(!0);var e=o.getTracks();e.forEach((function(e){"video"===e.kind&&(e.enabled=!1)})),Et(e)},className:"bg-gray  mr-4",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:S,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name",children:"Camera Off"})]})}),Object(U.jsx)("div",{children:We?Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{onClick:Rt,className:"bg-gray active-pink mr-4 ",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:T,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name ml-2",children:"Unmute"})," "]}):Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{onClick:Dt,className:"bg-gray mr-4 ",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:z,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name ml-3",children:"Mute"})]})}),Object(U.jsx)("div",{children:ae&&!he?Object(U.jsx)("div",{children:Object(U.jsxs)(N.a,{className:"call mr-4 ",size:"md",variant:"secondary",onClick:function(){Oe(!0),console.log("mystream",o.getTracks()),console.log("remoteStream",p.getTracks()),F.emit("endCallRoute",!0),F.on("endCallRoute",(function(e){console.log("value",e),e&&St.push("/")}))},children:[" ","End Call",Object(U.jsx)("img",{className:"ml-2",src:E,alt:"chat-btn",width:"26px",height:"26px"})]})}):Object(U.jsx)("div",{children:Object(U.jsxs)(N.a,{className:"call mr-4 ",size:"md",variant:"secondary",onClick:function(){return Tt(me)},children:[" ","Call",Object(U.jsx)("img",{className:"ml-2",src:E,alt:"chat-btn",width:"26px",height:"26px"})]})})}),Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{className:"bg-gray mr-4",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:D,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name ml-3",children:"Record"})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{className:"bg-gray mr-4",size:"md",variant:"secondary",onClick:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var t=e.getVideoTracks()[0];t.onended=function(){Pt()},at.find((function(e){return e.track.kind==t.kind})).replaceTrack(t)}))},children:Object(U.jsx)("img",{src:R,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name",children:"Share screen"})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)(N.a,{className:"bg-gray ",size:"md",variant:"secondary",children:Object(U.jsx)("img",{src:M,alt:"chat-btn",width:"20px",height:"20px"})}),Object(U.jsx)("span",{className:"sub-name ml-2",children:"Volume"})]})]})}),Object(U.jsx)("div",{className:"col-md-6 col-lg-4 mt-4 ml-4 bg-chat",children:Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{className:"chat-name m-1",children:"Chat Room"}),Object(U.jsx)("hr",{className:"hr"}),Object(U.jsx)("div",{className:"render-chat",children:Me.map((function(e,t){var c=e.name,a=e.message;return Object(U.jsx)("div",{children:Object(U.jsxs)("h6",{children:[c,": ",Object(U.jsx)("span",{className:"chat-bg",children:a})]})},t)}))}),Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsx)("div",{className:"",children:Object(U.jsx)(N.a,{className:"attach mr-3 ",size:"md",variant:"secondary",children:Object(U.jsx)("img",{className:"pb-1",src:P,alt:"attach",width:"20px",height:"20px"})})}),Object(U.jsx)("div",{className:"",children:Object(U.jsx)("input",{className:"form-control send",name:"message",onChange:function(e){return wt(e)},value:He.message,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),zt())},placeholder:"Write your message..."})}),Object(U.jsx)("div",{children:Object(U.jsx)(N.a,{onClick:zt,className:"attach ml-3",size:"md",variant:"secondary",children:Object(U.jsx)("img",{className:"pl-1 pb-1",src:I,alt:"send",width:"20px",height:"20px"})})})]})]})})]}),Object(U.jsx)("div",{children:Object(U.jsxs)(k.a,{className:" bg-light",show:rt,backdrop:"static",onHide:lt,children:[Object(U.jsxs)("div",{className:"join-meeting",children:[Object(U.jsx)(k.a.Header,{className:"header",children:Object(U.jsx)(k.a.Title,{className:"join-tag",children:"Join Meeting"})}),Object(U.jsxs)(k.a.Body,{className:"join-body",children:[Object(U.jsx)(y.a.Control,{className:"mb-3",size:"sm",type:"text",label:"Name",name:"name",value:He.name,onChange:function(e){return wt(e)},placeholder:"Your Name"}),Object(U.jsx)(y.a.Control,{className:"mb-3",size:"sm",type:"text",label:"ID to call",value:me,onChange:function(e){return de(e.target.value)},placeholder:"Enter meeting ID to join"}),Object(U.jsx)(f.CopyToClipboard,{text:n,children:Object(U.jsx)(N.a,{className:"ID-btn cancle-btn d-block mb-5",variant:"secondary",children:"Copy Meeting ID"})}),Object(U.jsx)(N.a,{className:"join-btn d-block mb-2",variant:"secondary",onClick:function(){return Tt(me)},children:"Join"}),Object(U.jsx)(N.a,{className:"cancle-btn mb-4",variant:"secondary",onClick:lt,children:"Cancel"})]})]}),Object(U.jsx)("div",{children:A&&!ae?Object(U.jsxs)("div",{className:"mt-3 ml-3 d-flex",children:[Object(U.jsxs)("h3",{children:[G," is calling you...!"]}),Object(U.jsx)(N.a,{className:"ml-1",size:"sm",variant:"danger",onClick:function(){ne(!0);var e=new x.a({initiator:!1,trickle:!1,stream:o});e.on("signal",(function(e){F.emit("answerCall",{signal:e,to:K,from:He.name})})),e.on("stream",(function(e){Nt.current.srcObject=e,J(e)})),e.signal($),kt.current=e,Ot(!0),nt(kt.current._pc.getSenders()),ot(!1)},children:"Answer"})]}):null})]})})]})},B=function(e){return Object(U.jsxs)("div",{className:"text-center mt-5",children:[Object(U.jsx)("h3",{children:"Click below button to join class"}),Object(U.jsx)(N.a,{variant:"danger",onClick:function(){var t=Object(r.a)();e.history.push("/room/".concat(t))},children:"Join Class Room"})]})};var V=function(){return Object(r.a)(),Object(U.jsx)("div",{children:Object(U.jsx)(o.a,{children:Object(U.jsxs)(l.c,{children:[Object(U.jsx)(l.a,{path:"/",exact:!0,component:B}),Object(U.jsx)(l.a,{path:"/room/:roomID",component:J})]})})})};var A=function(){return Object(U.jsx)("div",{children:Object(U.jsx)(V,{})})},H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,146)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))};i.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(A,{})}),document.getElementById("root")),H()},87:function(e,t,c){}},[[140,1,2]]]);
//# sourceMappingURL=main.f442c769.chunk.js.map